<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pablo Santos ‚Äî Cart√£o Digital</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="page-bg">
    <!-- Elemento principal que ser√° capturado para export -->
    <main id="card-root" class="card" role="main" aria-label="Cart√£o digital de Pablo Santos">
      <header class="card-top" aria-hidden="true"></header>

      <div class="card-body">
        <div class="profile">
          <img class="avatar" src="assets/minha-foto.png" alt="Avatar ‚Äî Pablo Santos">
          <h1 class="name">Pablo Santos</h1>
          <p class="role">Desenvolvedor junior Full Stack</p>

          <div class="badges" aria-hidden="false" aria-label="Compet√™ncias">
            <span class="badge">java</span>
            <span class="badge">HTML5,CSS3</span>
            <span class="badge">SQL</span>
          </div>
        </div>

        <p class="bio">Estudante em in√≠cio de jornada, curioso e motivado para aprender a criar solu√ß√µes digitais e melhorar experi√™ncias de usu√°rio</p>

        <hr class="divider">

        <section class="contacts" aria-label="Informa√ß√µes de contacto">
          <div class="contact-row">
            <div class="icon">‚úâÔ∏è</div>
            <div class="meta">
              <div class="label">Email</div>
              <div class="value"><a href="mailto:pablo.santos.devfs@gmail.com">pablo.santos.devfs@gmail.com</a></div>
            </div>
          </div>
          <hr class="row-sep">
          <div class="contact-row">
            <div class="icon">üìû</div>
            <div class="meta">
              <div class="label">Telefone</div>
              <div class="value"><a href="tel:+351913663732">+351 913 663 732</a></div>
            </div>
          </div>
          <hr class="row-sep">
          <div class="contact-row">
            <div class="icon">üìç</div>
            <div class="meta">
              <div class="label">Localiza√ß√£o</div>
              <div class="value">Braga, Portugal</div>
            </div>
          </div>
        </section>

        <hr class="divider">

        <!-- Social buttons: ficam ACIMA do QR -->
        <div class="social-wrapper">
          <div class="social-buttons" aria-label="Redes sociais">
            <a class="social-btn github" href="https://github.com/BROLY-42" target="_blank" rel="noopener noreferrer" aria-label="GitHub de Pablo">
              <!-- GitHub SVG -->
              <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" fill="currentColor"><path d="M12 .5C5.65.5.5 5.65.5 12c0 5.09 3.29 9.4 7.86 10.93.58.11.79-.25.79-.56 0-.28-.01-1.02-.02-2-3.2.7-3.88-1.54-3.88-1.54-.53-1.36-1.3-1.72-1.3-1.72-1.06-.73.08-.72.08-.72 1.17.08 1.79 1.2 1.79 1.2 1.04 1.78 2.72 1.27 3.38.97.1-.75.41-1.27.75-1.56-2.56-.29-5.26-1.28-5.26-5.71 0-1.26.45-2.29 1.2-3.1-.12-.29-.52-1.47.11-3.07 0 0 .98-.31 3.21 1.18.93-.26 1.92-.39 2.91-.39s1.98.13 2.91.39c2.23-1.49 3.21-1.18 3.21-1.18.63 1.6.23 2.78.11 3.07.75.81 1.2 1.84 1.2 3.1 0 4.44-2.71 5.42-5.29 5.7.42.36.8 1.08.8 2.18 0 1.58-.01 2.85-.01 3.24 0 .31.21.68.8.56C20.71 21.4 24 17.09 24 12c0-6.35-5.15-11.5-11.5-11.5z"/></svg>
              <span>GitHub</span>
            </a>

            <a class="social-btn insta" href="https://instagram.com/eu_yuriy" target="_blank" rel="noopener noreferrer" aria-label="Instagram de Pablo">
              <!-- Instagram SVG -->
              <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" fill="currentColor"><path d="M7 2C4.79 2 3 3.79 3 6v12c0 2.21 1.79 4 4 4h10c2.21 0 4-1.79 4-4V6c0-2.21-1.79-4-4-4H7zm10 2c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h10zM12 7.25A4.75 4.75 0 1 0 12 16.75 4.75 4.75 0 1 0 12 7.25zm0 2A2.75 2.75 0 1 1 12 14.75 2.75 2.75 0 1 1 12 9.25zM17.5 6.5a.9.9 0 1 1 0 1.8.9.9 0 0 1 0-1.8z"/></svg>
              <span>Instagram</span>
            </a>
          </div>
        </div>

        <hr class="divider thin">

        <div class="qr-block" aria-label="QR code para vCard">
          <p class="qr-text">Escaneie para salvar contacto</p>
          <img class="qr" src="assets/qr.png" alt="QR code vCard">

          <!-- Bot√£o de partilha / export para cima -->
          <div class="share-wrapper">
            <button id="share-btn" class="share-btn" title="Partilhar / Exportar">
              <!-- √çcone share -->
              <svg class="share-svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91a3 3 0 1 0-3-3c0 .24.04.47.09.7L8.07 9.73A3.001 3.001 0 0 0 6 9a3 3 0 1 0 3 3c0-.24-.04-.47-.09-.7l6.97 4.16c-.05.21-.08.43-.08.65a3 3 0 1 0 3-3z"/>
              </svg>
              <span>Partilhar</span>
            </button>

            <div id="share-pop" class="share-pop" aria-hidden="true">
              <button id="export-jpg" class="export-option">Exportar como JPG</button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- html2canvas (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script>
    // Toggle popover acima do bot√£o
    const shareBtn = document.getElementById('share-btn');
    const sharePop = document.getElementById('share-pop');

    shareBtn.addEventListener('click', (e) => {
      // toggle display
      if (sharePop.style.display === 'block') {
        sharePop.style.display = 'none';
      } else {
        sharePop.style.display = 'block';
      }
    });

    // Exportar como JPG usando html2canvas
    document.getElementById('export-jpg').addEventListener('click', async () => {
      sharePop.style.display = 'none';
      const root = document.getElementById('card-root');
      try {
        if (typeof html2canvas === 'undefined') {
          alert('Biblioteca html2canvas n√£o foi carregada.');
          return;
        }
        const scale = 2;
        const canvas = await html2canvas(root, {
          scale: scale,
          useCORS: true,
          backgroundColor: null,
          logging: false
        });
        const dataUrl = canvas.toDataURL('image/jpeg', 0.92);
        const link = document.createElement('a');
        link.href = dataUrl;
        link.download = 'pablo-santos-card.jpg';
        document.body.appendChild(link);
        link.click();
        link.remove();
      } catch (err) {
        console.error(err);
        alert('Erro ao exportar. Verifica CORS das imagens (avatar/qr).');
      }
    });

    // fecha popover ao clicar fora
    document.addEventListener('click', (ev) => {
      const pop = document.getElementById('share-pop');
      if (!pop) return;
      const target = ev.target;
      if (target === shareBtn || shareBtn.contains(target)) return;
      if (pop.contains(target)) return;
      pop.style.display = 'none';
    });
  </script>
</body>
</html>
